function setup_input

% These variables end with _multi in arts, but the names are here shorten
% to the names used for single mixer cases
  
% AMSU-B is a true DSB instrument, but one sideband must be assigned as 
% main band and the upper band is here selected.


% Index of mixers to include. Just index for data specified below.
%
ind = 1:3;

  
%--- LO frequencies
%
lo            = [89e9, 150e9, 183.31e9];
%
xmlStore( 'amsub.lo.xml', lo(ind), 'Vector' );


%--- Main sideband (see above)
%
sideband_mode = { 'upper', 'upper', 'upper' };
%
xmlStore( 'amsub.sideband_mode.xml', {sideband_mode{ind}}, 'ArrayOfString' );


%--- Sideband response
%
% Is equal everywhere but frequency grids must be adjusted to channel
% width and spacing.
%
Gtmplt.name      = 'Sideband response function';
Gtmplt.gridnames = { 'Frequency' };
Gtmplt.grids     = [];
Gtmplt.dataname  = 'Response';
Gtmplt.data      = [0.5 0.5];
%
[G{1:3}]         = deal( Gtmplt );
%
G{1}.grids = { 1401e6*[-1 1] };
G{2}.grids = G{1}.grids;
G{3}.grids = { 8001e6*[-1 1] };
%
xmlStore( 'amsub.sideband_response.xml', {G{ind}}, 'ArrayOfGriddedField1' );


%--- Center position of backend channels
%
% Frequencies must match selection of "main band"
%
G = { [89.9e9], [150.9e9], [184.31e9, 186.31e9, 190.31e9] };
%
xmlStore( 'amsub.f_backend.xml', {G{ind}}, 'ArrayOfVector' );


%--- Backend channel response functions
%
Gtmplt.name   = 'Backend channel response function';
Gtmplt.data   = [0 1 1 0];
%
G             = [];
%
G{1}{1}       = Gtmplt;
G{1}{1}.grids = { [-501 -499 499 501]*1e6 };
%
G{2}{1}       = G{1}{1};
%
G{3}{1}       = Gtmplt;
G{3}{1}.grids = { [-251 -249 249 251]*1e6 };
G{3}{2}       = G{1}{1};
G{3}{3}       = Gtmplt;
G{3}{3}.grids = { [-1001 -999 999 1001]*1e6 };
%
xmlStore( 'amsub.backend_channel_response.xml', {G{ind}}, ...
                                               'ArrayOfArrayOfGriddedField1' );


%--- f_mono
%
% Not yet optimised
%
f = f_grid;
%
xmlStore( 'amsub.f_grid.xml', f, 'Vector' );






function f = f_grid
  
% The grid used for older version:
f = [
87599000000
87690090909.0909
87781181818.1818
87872272727.2727
87963363636.3636
88054454545.4546
88145545454.5455
88236636363.6364
88327727272.7273
88418818181.8182
88509909090.9091
88601000000
89399000000
89490090909.0909
89581181818.1818
89672272727.2727
89763363636.3636
89854454545.4546
89945545454.5455
90036636363.6364
90127727272.7273
90218818181.8182
90309909090.9091
90401000000
148599000000
148690090909.091
148781181818.182
148872272727.273
148963363636.364
149054454545.455
149145545454.545
149236636363.636
149327727272.727
149418818181.818
149509909090.909
149601000000
150399000000
150490090909.091
150581181818.182
150672272727.273
150763363636.364
150854454545.455
150945545454.545
151036636363.636
151127727272.727
151218818181.818
151309909090.909
151401000000
175309000000
175404333333.333
175499666666.667
175595000000
175690333333.333
175785666666.667
175881000000
175976333333.333
176071666666.667
176167000000
176262333333.333
176357666666.667
176453000000
176548333333.333
176643666666.667
176739000000
176834333333.333
176929666666.667
177025000000
177120333333.334
177215666666.667
177311000000
179809000000
179900090909.091
179991181818.182
180082272727.273
180173363636.364
180264454545.455
180355545454.545
180446636363.636
180537727272.727
180628818181.818
180719909090.909
180811000000
182059000000
182142666666.667
182226333333.333
182310000000
182393666666.667
182477333333.333
182561000000
184059000000
184142666666.667
184226333333.333
184310000000
184393666666.667
184477333333.333
184561000000
185809000000
185900090909.091
185991181818.182
186082272727.273
186173363636.364
186264454545.455
186355545454.545
186446636363.636
186537727272.727
186628818181.818
186719909090.909
186811000000
189309000000
189404333333.333
189499666666.667
189595000000
189690333333.333
189785666666.667
189881000000
189976333333.333
190071666666.667
190167000000
190262333333.333
190357666666.667
190453000000
190548333333.333
190643666666.667
190739000000
190834333333.333
190929666666.667
191025000000
191120333333.334
191215666666.667
191311000000
];