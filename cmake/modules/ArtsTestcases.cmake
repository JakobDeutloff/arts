macro (ARTS_TEST_RUN_CTLFILE TESTNAME CTLFILE)
  if (CMAKE_CACHE_MAJOR_VERSION EQUAL 2 AND CMAKE_CACHE_MINOR_VERSION EQUAL 6)
    set(ARTS ${CMAKE_CURRENT_BINARY_DIR}/../src/arts -r002)
    add_test(
      arts.ctlfile.${TESTNAME}
      COMMAND ${ARTS} ${CMAKE_CURRENT_SOURCE_DIR}/${CTLFILE}
      )
  else (CMAKE_CACHE_MAJOR_VERSION EQUAL 2 AND CMAKE_CACHE_MINOR_VERSION EQUAL 6)
    set(ARTS arts -r002)
    add_test(
      NAME arts.ctlfile.${TESTNAME}
      COMMAND ${ARTS} ${CMAKE_CURRENT_SOURCE_DIR}/${CTLFILE}
      )
  endif (CMAKE_CACHE_MAJOR_VERSION EQUAL 2 AND CMAKE_CACHE_MINOR_VERSION EQUAL 6)

endmacro (ARTS_TEST_RUN_CTLFILE)

macro (ARTS_TEST_CTLFILE_DEPENDS TESTNAME DEPENDNAME)
  set_tests_properties(
    arts.ctlfile.${TESTNAME}
    PROPERTIES DEPENDS arts.ctlfile.${DEPENDNAME}
    )
endmacro (ARTS_TEST_CTLFILE_DEPENDS)

