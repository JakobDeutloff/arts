#DEFINITIONS:  -*-sh-*-
#This control file perfoems an ARTS-MC radiative transfer simulation
#For a single line of sight and a Pencil Beam antenna response


Main{

output_file_formatSetAscii{
}

#### LOAD DATA: these files were created with MCDataPrepare.arts ######

ReadXML( f_grid ){
filename="data/f_grid.xml.generated"
} 

IndexSet(f_index){
value=0
}

ReadXML(p_grid){
filename="data/p_grid.xml"
}

AtmosphereSet3D{
}

ReadXML(lat_grid){
filename="data/lat_grid.xml"
}

ReadXML(lon_grid){
filename="data/lon_grid.xml"
}

ReadXML( t_field ){
filename="data/t_field.xml.generated"
} 

ReadXML( z_field ){
filename="data/z_field.xml.generated"
} 

ReadXML( vmr_field ){
filename="data/vmr_field.xml.generated"
} 

r_geoidSpherical{
r=-1
}

ReadXML(z_surface){
filename="data/z_surface.xml.generated"
}

ReadXML(gas_abs_lookup){
filename="data/gas_abs_lookup_adapted.xml.generated"
}

IndexSet (gas_abs_lookup_is_adapted ){
value=1
}

ReadXML(cloudbox_limits){
filename="data/cloudbox_limits.xml.generated"
}

ReadXML(pnd_field){
filename="data/pnd_field.xml.generated"
}

ReadXML(scat_data_mono){
filename="data/scat_data_mono.xml.generated"
}


#### Define Agendas #################################################

AgendaSet(iy_space_agenda){
  Ignore(rte_pos){}
  Ignore(rte_los){}
  MatrixCBR(iy,f_grid){
  }
}

AgendaSet(surface_prop_agenda){
  InterpAtmFieldToRteGps( surface_skin_t, t_field ){}
  surfaceBlackbody{}
  Ignore(rte_los){}  
}

AgendaSet(scalar_gas_absorption_agenda){
  abs_scalar_gasExtractFromLookup{
}

}

AgendaSet( emission_agenda ){
   emissionPlanck{}
}

AgendaSet(opt_prop_gas_agenda){
  ext_matInit{
  }
  abs_vecInit{
  }
  ext_matAddGas{
  }
  abs_vecAddGas{
  }
}

AgendaSet(spt_calc_agenda){
  opt_prop_sptFromMonoData{
  }
}

#### Define viewing position and line of sight #########################

rte_losSet{
za=99.7841941981
aa=180
}

rte_posSet{
r_or_z=95000.1
lat=7.61968838781
lon=0
}

rte_posAddRgeoid{
}

Matrix1RowFromVector(sensor_pos,rte_pos){
}

Print(sensor_pos){
level=1
}

Matrix1RowFromVector(sensor_los,rte_los){
}

Print(sensor_los){
level=1
}

#### Set some Monte Carlo parameters ###################################

IndexSet(stokes_dim){
value=4
}

StringSet (mc_unit){
    text="RJBT"
}

MCSetSeedFromTime{}

Print(mc_seed){
level=1
}

mc_antennaSetPencilBeam{}

#### Perform Monte Carlo RT Calculation #################################

MCGeneral{
    std_err=-1
    max_time=20
    max_iter=-1
    z_field_is_1D=1
}

#### Print calculated Stokes vector, std. err., number of photons, #####
# and radiance units ###################################################

Print(y){
level=1
}

Print(mc_error){
level=1
}

Print(mc_iteration_count){
level=1
}

Print(mc_unit){
level=1
}


}

